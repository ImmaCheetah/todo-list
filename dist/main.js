(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{H:()=>y});const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let n;const o=new Uint8Array(16);function d(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));const l=function(e,n,o){if(t.randomUUID&&!n&&!e)return t.randomUUID();const l=(e=e||{}).random||(e.rng||d)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,n){o=o||0;for(let e=0;e<16;++e)n[o+e]=l[e];return n}return function(e,t=0){return r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]}(l)};function i(e,t,n,o){let d=!1;e=e.toString(),t=t.toString();const r=e=>{o=e};return{get title(){return e},get description(){return t},get dueDate(){return n},get priority(){return o},getCompleteState:()=>d,setComplete:()=>{d=!0},changePriority:r,editTask:(o,d,l,i)=>{e=o,t=d,n=l,r(i)},printTask:()=>{console.log(`Task title - ${e}, Desc - ${t}, Date - ${n}, Priority - ${o}`)}}}function a(e){let t=l(),n=[];return{title:e,tasks:n,myuuid:t,addTask:e=>{n.push(e)},displayTasks:()=>{for(let e=0;e<n.length;e++)console.log(`Task ${e} - ${n[e].title}, ${n[e].dueDate}, ${n[e].priority}`)},deleteTask:e=>{n.splice(e,1)}}}function s(e){let t=function(e){const t=document.querySelector(".sidebar"),n=document.createElement("div"),o=document.createElement("button");return n.classList.add("folder-div"),o.classList.add("folder-button"),o.textContent=e.title,o.value=e.myuuid,n.appendChild(o),t.appendChild(n),o.addEventListener("click",(function(){y(e.myuuid),console.log(e.title,e.myuuid)})),n}(e);document.querySelector(".sidebar").appendChild(t)}const c=function(){let e=[];return{folders:e,addFolder:t=>{e.push(t)},deleteFolder:t=>{e.splice(t,1)}}}(),u=a("Inbox");console.log("Inbox Folder ID is "+u.myuuid);const m=i("chores","wash dishes","nov 23","high"),p=i("movies","avatar","nov 29","med"),f=i("coding","todo list","dec 10","low");function y(e){c.folders.forEach((t=>{e===t.myuuid&&(document.getElementById("task-container").textContent="",function(e){e.tasks.forEach((e=>{!function(e,t){let n=function(e){const t=document.createElement("div"),n=document.createElement("p"),o=document.createElement("p"),d=document.createElement("p"),r=document.createElement("p");return t.classList.add("task-div"),n.textContent=e.title,o.textContent=e.description,d.textContent=e.dueDate,r.textContent=e.priority,t.appendChild(n),t.appendChild(o),t.appendChild(d),t.appendChild(r),t}(e);document.getElementById(t).appendChild(n)}(e,["task-container"])}))}(t),console.log("match found"))}))}m.editTask("new thing","another new thing","new date","HIGH"),u.addTask(f),u.addTask(p),u.addTask(m),u.displayTasks(),c.addFolder(u),console.log(c),document.getElementById("open-task-modal-btn").addEventListener("click",(function(){document.getElementById("task-dialog").showModal(),function(){const e=document.createElement("select"),t=document.getElementById("priority-options");e.setAttribute("id","folder-selection"),t.after(e)}()})),document.getElementById("folder-add-btn").addEventListener("click",(function(){document.getElementById("folder-dialog").showModal()})),document.getElementById("folder-confirm-btn").addEventListener("click",(function(e){e.preventDefault();const t=document.getElementById("folder-dialog"),{folderTitleInForm:n}=function(){const e=document.getElementById("folder-form");return{folderForm:e,folderTitleInForm:e.elements["folder-title"].value}}();let o=a(n);s(o),c.addFolder(o),console.log(c.folders),t.close()})),document.getElementById("task-add-btn").addEventListener("click",(function(){let e=y(folderName.myuuid);const{taskTitle:t,taskDescription:n,taskDueDate:o,taskPriority:d}=function(){const e=document.getElementById("main-form"),t=e.elements["task-title"],n=e.elements["task-description"],o=e.elements["task-due-date"],d=e.elements["task-priority"];return{taskTitle:t.value,taskDescription:n.value,taskDueDate:o.value,taskPriority:d.value}}(),r=i(t,n,o,d);c.folders.forEach((t=>{e===t.myuuid&&t.addTask(r)})),console.log(r.printTask())}));let g=a("test");g.addTask(m),c.addFolder(g),s(g);let k=a("test2");k.addTask(p),c.addFolder(k),s(k)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUJBLEVBQXdCLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEYsRUFBb0JJLEVBQUVGLEVBQVlDLEtBQVNILEVBQW9CSSxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLElBRTFFLEVDTkRILEVBQXdCLENBQUNTLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEksa0JDQWxGLE1BQ0EsR0FDRUksV0FGbUMsb0JBQVhDLFFBQTBCQSxPQUFPRCxZQUFjQyxPQUFPRCxXQUFXRSxLQUFLRCxTQ0doRyxJQUFJRSxFQUNKLE1BQU1DLEVBQVEsSUFBSUMsV0FBVyxJQUNkLFNBQVNDLElBRXRCLElBQUtILElBRUhBLEVBQW9DLG9CQUFYRixRQUEwQkEsT0FBT0UsaUJBQW1CRixPQUFPRSxnQkFBZ0JELEtBQUtELFNBRXBHRSxHQUNILE1BQU0sSUFBSUksTUFBTSw0R0FJcEIsT0FBT0osRUFBZ0JDLEVBQ3pCLENDWEEsTUFBTUksRUFBWSxHQUVsQixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSSxNQUFPQSxFQUN6QkQsRUFBVUUsTUFBTUQsRUFBSSxLQUFPRSxTQUFTLElBQUlDLE1BQU0sSUNtQmhELFFBeEJBLFNBQVlDLEVBQVNDLEVBQUtDLEdBQ3hCLEdBQUksRUFBT2YsYUFBZWMsSUFBUUQsRUFDaEMsT0FBTyxFQUFPYixhQUloQixNQUFNZ0IsR0FETkgsRUFBVUEsR0FBVyxDQUFDLEdBQ0RJLFNBQVdKLEVBQVFQLEtBQU9BLEtBSy9DLEdBSEFVLEVBQUssR0FBZSxHQUFWQSxFQUFLLEdBQVksR0FDM0JBLEVBQUssR0FBZSxHQUFWQSxFQUFLLEdBQVksSUFFdkJGLEVBQUssQ0FDUEMsRUFBU0EsR0FBVSxFQUVuQixJQUFLLElBQUlOLEVBQUksRUFBR0EsRUFBSSxLQUFNQSxFQUN4QkssRUFBSUMsRUFBU04sR0FBS08sRUFBS1AsR0FHekIsT0FBT0ssQ0FDVCxDQUVBLE9EYkssU0FBeUJJLEVBQUtILEVBQVMsR0FHNUMsT0FBT1AsRUFBVVUsRUFBSUgsRUFBUyxJQUFNUCxFQUFVVSxFQUFJSCxFQUFTLElBQU1QLEVBQVVVLEVBQUlILEVBQVMsSUFBTVAsRUFBVVUsRUFBSUgsRUFBUyxJQUFNLElBQU1QLEVBQVVVLEVBQUlILEVBQVMsSUFBTVAsRUFBVVUsRUFBSUgsRUFBUyxJQUFNLElBQU1QLEVBQVVVLEVBQUlILEVBQVMsSUFBTVAsRUFBVVUsRUFBSUgsRUFBUyxJQUFNLElBQU1QLEVBQVVVLEVBQUlILEVBQVMsSUFBTVAsRUFBVVUsRUFBSUgsRUFBUyxJQUFNLElBQU1QLEVBQVVVLEVBQUlILEVBQVMsS0FBT1AsRUFBVVUsRUFBSUgsRUFBUyxLQUFPUCxFQUFVVSxFQUFJSCxFQUFTLEtBQU9QLEVBQVVVLEVBQUlILEVBQVMsS0FBT1AsRUFBVVUsRUFBSUgsRUFBUyxLQUFPUCxFQUFVVSxFQUFJSCxFQUFTLElBQ2hmLENDU1NJLENBQWdCSCxFQUN6QixFQ3hCTyxTQUFTSSxFQUFLQyxFQUFPQyxFQUFhQyxFQUFTQyxHQUU5QyxJQUFJQyxHQUFnQixFQU9wQkosRUFBUUEsRUFBTVYsV0FDZFcsRUFBY0EsRUFBWVgsV0FFMUIsTUFBTWUsRUFBa0JDLElBQ3BCSCxFQUFXRyxDQUFXLEVBYzFCLE1BQU8sQ0FDSCxTQUFJTixHQUFTLE9BQU9BLENBQUssRUFDekIsZUFBSUMsR0FBZSxPQUFPQSxDQUFXLEVBQ3JDLFdBQUlDLEdBQVcsT0FBT0EsQ0FBTyxFQUM3QixZQUFJQyxHQUFZLE9BQU9BLENBQVEsRUFDL0JJLGlCQTVCcUIsSUFBTUgsRUE2QjNCSSxZQTNCZ0IsS0FDaEJKLEdBQWdCLENBQUksRUEyQnBCQyxpQkFDQUksU0FuQmEsQ0FBQ0MsRUFBVUMsRUFBZ0JDLEVBQVlOLEtBQ3BETixFQUFRVSxFQUNSVCxFQUFjVSxFQUNkVCxFQUFVVSxFQUNWUCxFQUFlQyxFQUFZLEVBZ0IzQk8sVUFiYyxLQUNkQyxRQUFRQyxJQUFJLGdCQUFnQmYsYUFBaUJDLGFBQXVCQyxpQkFBdUJDLElBQVcsRUFjOUcsQ0FHTyxTQUFTYSxFQUFPaEIsR0FHbkIsSUFBSWlCLEVBQVMsSUFDVEMsRUFBUSxHQWlCWixNQUFPLENBQUNsQixRQUFPa0IsUUFBT0QsU0FBUUUsUUFmYkMsSUFDYkYsRUFBTTdCLEtBQUsrQixFQUFZLEVBY1lDLGFBWGxCLEtBQ2pCLElBQUssSUFBSWpDLEVBQUksRUFBR0EsRUFBSThCLEVBQU1JLE9BQVFsQyxJQUM5QjBCLFFBQVFDLElBQUksUUFBUTNCLE9BQU84QixFQUFNOUIsR0FBR1ksVUFBVWtCLEVBQU05QixHQUFHYyxZQUFZZ0IsRUFBTTlCLEdBQUdlLFdBQ2hGLEVBUWlEb0IsV0FMakNDLElBQ2hCTixFQUFNTyxPQUFPRCxFQUFVLEVBQUUsRUFLakMsQ0N1QkEsU0FBU0UsRUFBYUMsR0FDbEIsSUFBSUMsRUEzQlIsU0FBNkJELEdBRXpCLE1BQU1FLEVBQVVDLFNBQVNDLGNBQWMsWUFDakNDLEVBQVlGLFNBQVNHLGNBQWMsT0FDbkNDLEVBQVlKLFNBQVNHLGNBQWMsVUFpQnpDLE9BZEFELEVBQVVHLFVBQVVDLElBQUksY0FDeEJGLEVBQVVDLFVBQVVDLElBQUksaUJBQ3hCRixFQUFVRyxZQUFjVixFQUFXM0IsTUFDbkNrQyxFQUFVSSxNQUFRWCxFQUFXVixPQUU3QmUsRUFBVU8sWUFBWUwsR0FFdEJMLEVBQVFVLFlBQVlQLEdBRXBCRSxFQUFVTSxpQkFBaUIsU0FBUyxXQUNoQ0MsRUFBMkJkLEVBQVdWLFFBQ3RDSCxRQUFRQyxJQUFJWSxFQUFXM0IsTUFBTzJCLEVBQVdWLE9BQzdDLElBRU9lLENBQ1gsQ0FLb0JVLENBQW9CZixHQUViRyxTQUFTQyxjQUFjLFlBQy9CUSxZQUFZWCxFQUMvQixDQ3hFQSxNQUFNZSxFRjhDQyxXQUNILElBQUlDLEVBQVUsR0FVZCxNQUFPLENBQUNBLFVBQVNDLFVBUkVDLElBQ2ZGLEVBQVF2RCxLQUFLeUQsRUFBYyxFQU9IQyxhQUpOcEIsSUFDbEJpQixFQUFRbkIsT0FBT0UsRUFBWSxFQUFFLEVBSXJDLENFMURvQnFCLEdBR2RDLEVBQWNqQyxFQUFPLFNBQzNCRixRQUFRQyxJQUFJLHNCQUF3QmtDLEVBQVloQyxRQUdoRCxNQUFNaUMsRUFBUW5ELEVBQUssU0FBVSxjQUFlLFNBQVUsUUFDaERvRCxFQUFRcEQsRUFBSyxTQUFVLFNBQVUsU0FBVSxPQUMzQ3FELEVBQVFyRCxFQUFLLFNBQVUsWUFBYSxTQUFVLE9BMkRwRCxTQUFTMEMsRUFBMkJZLEdBRWhDVixFQUFZQyxRQUFRVSxTQUFRQyxJQUNwQkYsSUFBV0UsRUFBT3RDLFNEb0JKYSxTQUFTMEIsZUFBZSxrQkFFaENuQixZQUFjLEdBNUVoQyxTQUE0QlYsR0FDeEJBLEVBQVdULE1BQU1vQyxTQUFRRyxLQVQ3QixTQUFvQmpDLEVBQVVrQyxHQUMxQixJQUFJQyxFQXpCUixTQUEyQm5DLEdBQ3ZCLE1BQU1vQyxFQUFVOUIsU0FBU0csY0FBYyxPQUNqQzRCLEVBQWlCL0IsU0FBU0csY0FBYyxLQUN4QzZCLEVBQXVCaEMsU0FBU0csY0FBYyxLQUM5QzhCLEVBQW1CakMsU0FBU0csY0FBYyxLQUMxQytCLEVBQW9CbEMsU0FBU0csY0FBYyxLQWFqRCxPQVhBMkIsRUFBUXpCLFVBQVVDLElBQUksWUFDdEJ5QixFQUFleEIsWUFBY2IsRUFBU3hCLE1BQ3RDOEQsRUFBcUJ6QixZQUFjYixFQUFTdkIsWUFDNUM4RCxFQUFpQjFCLFlBQWNiLEVBQVN0QixRQUN4QzhELEVBQWtCM0IsWUFBY2IsRUFBU3JCLFNBRXpDeUQsRUFBUXJCLFlBQVlzQixHQUNwQkQsRUFBUXJCLFlBQVl1QixHQUNwQkYsRUFBUXJCLFlBQVl3QixHQUNwQkgsRUFBUXJCLFlBQVl5QixHQUViSixDQUNYLENBTWtCSyxDQUFrQnpDLEdBRVpNLFNBQVMwQixlQUFlRSxHQUNoQ25CLFlBQVlvQixFQUM1QixDQUtRTyxDQUFXVCxFQUFNLENBQUMsa0JBQWtCLEdBRTVDLENDcURZVSxDQUFtQlosR0FDbkJ6QyxRQUFRQyxJQUFJLGVBQ2hCLEdBRVIsQ0FuRUFtQyxFQUFNekMsU0FBUyxZQUFhLG9CQUFxQixXQUFZLFFBRzdEd0MsRUFBWTlCLFFBQVFpQyxHQUNwQkgsRUFBWTlCLFFBQVFnQyxHQUNwQkYsRUFBWTlCLFFBQVErQixHQUNwQkQsRUFBWTVCLGVBQ1pzQixFQUFZRSxVQUFVSSxHQUN0Qm5DLFFBQVFDLElBQUk0QixHQUlhYixTQUFTMEIsZUFBZSx1QkFDaENoQixpQkFBaUIsU0FBUyxXQUNwQlYsU0FBUzBCLGVBQWUsZUFFaENZLFlEcUVmLFdBQ0ksTUFBTUMsRUFBU3ZDLFNBQVNHLGNBQWMsVUFDaENxQyxFQUFXeEMsU0FBUzBCLGVBQWUsb0JBRXpDYSxFQUFPRSxhQUFhLEtBQU0sb0JBRTFCRCxFQUFTRSxNQUFNSCxFQUNuQixDQzNFSUksRUFDSixJQU9xQjNDLFNBQVMwQixlQUFlLGtCQUNoQ2hCLGlCQUFpQixTQUFTLFdBRWRWLFNBQVMwQixlQUFlLGlCQUdoQ1ksV0FDakIsSUFPd0J0QyxTQUFTMEIsZUFBZSxzQkFDaENoQixpQkFBaUIsU0FBUyxTQUFTa0MsR0FDL0NBLEVBQUVDLGlCQUVGLE1BQU1DLEVBQWU5QyxTQUFTMEIsZUFBZSxrQkFDdkMsa0JBQUNxQixHRDJCWCxXQUNJLE1BQU1DLEVBQWFoRCxTQUFTMEIsZUFBZSxlQUkzQyxNQUFPLENBQUNzQixhQUFZRCxrQkFGTUMsRUFBV0MsU0FBUyxnQkFBZ0J6QyxNQUdsRSxDQ2pDZ0MwQyxHQUU1QixJQUFJQyxFQUFZakUsRUFBTzZELEdBQ3ZCbkQsRUFBYXVELEdBRWJ0QyxFQUFZRSxVQUFVb0MsR0FDdEJuRSxRQUFRQyxJQUFJNEIsRUFBWUMsU0FFeEJnQyxFQUFhTSxPQUNqQixJQWdCbUJwRCxTQUFTMEIsZUFBZSxnQkFFaENoQixpQkFBaUIsU0FBUyxXQUNqQyxJQUFJMkMsRUFBWTFDLEVBQTJCZCxXQUFXVixRQUN0RCxNQUFNLFVBQUNtRSxFQUFTLGdCQUFFQyxFQUFlLFlBQUVDLEVBQVcsYUFBRUMsR0Q3RHBELFdBQ0ksTUFBTUMsRUFBTzFELFNBQVMwQixlQUFlLGFBRS9CaUMsRUFBa0JELEVBQUtULFNBQVMsY0FDaENXLEVBQXdCRixFQUFLVCxTQUFTLG9CQUN0Q1ksRUFBb0JILEVBQUtULFNBQVMsaUJBQ2xDYSxFQUFxQkosRUFBS1QsU0FBUyxpQkFPekMsTUFBTyxDQUFDSyxVQUxRSyxFQUFnQm5ELE1BS2IrQyxnQkFKR0ssRUFBc0JwRCxNQUlSZ0QsWUFIbEJLLEVBQWtCckQsTUFHYWlELGFBRjlCSyxFQUFtQnRELE1BRzFDLENDK0NvRXVELEdBRTFEQyxFQUFVL0YsRUFBS3FGLEVBQVdDLEVBQWlCQyxFQUFhQyxHQUM5RDVDLEVBQVlDLFFBQVFVLFNBQVFDLElBQ3BCNEIsSUFBYzVCLEVBQU90QyxRQUNyQnNDLEVBQU9wQyxRQUFRMkUsRUFDbkIsSUFFSmhGLFFBQVFDLElBQUkrRSxFQUFRakYsWUFDeEIsSUFHQSxJQUFJa0YsRUFBYS9FLEVBQU8sUUFDeEIrRSxFQUFXNUUsUUFBUStCLEdBQ25CUCxFQUFZRSxVQUFVa0QsR0FDdEJyRSxFQUFhcUUsR0FFYixJQUFJQyxFQUFjaEYsRUFBTyxTQUN6QmdGLEVBQVk3RSxRQUFRZ0MsR0FDcEJSLEVBQVlFLFVBQVVtRCxHQUN0QnRFLEVBQWFzRSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9uYXRpdmUuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9mYWN0b3JpZXMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvZG9tLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJhbmRvbVVVSURcbn07IiwiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG5sZXQgZ2V0UmFuZG9tVmFsdWVzO1xuY29uc3Qgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi5cbiAgICBnZXRSYW5kb21WYWx1ZXMgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pO1xuXG4gICAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCJpbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG4vKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cblxuY29uc3QgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnNsaWNlKDEpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG4gIHJldHVybiBieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgcmV0dXJuIHV1aWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiLCJpbXBvcnQgbmF0aXZlIGZyb20gJy4vbmF0aXZlLmpzJztcbmltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBpZiAobmF0aXZlLnJhbmRvbVVVSUQgJiYgIWJ1ZiAmJiAhb3B0aW9ucykge1xuICAgIHJldHVybiBuYXRpdmUucmFuZG9tVVVJRCgpO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KHJuZHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2NDsiLCJpbXBvcnQge3Y0IGFzIHV1aWR2NH0gZnJvbSAndXVpZCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBUYXNrKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpIHtcblxuICAgIGxldCBjb21wbGV0ZVN0YXRlID0gZmFsc2U7XG5cbiAgICBjb25zdCBnZXRDb21wbGV0ZVN0YXRlID0gKCkgPT4gY29tcGxldGVTdGF0ZTtcblxuICAgIGNvbnN0IHNldENvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICBjb21wbGV0ZVN0YXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgdGl0bGUgPSB0aXRsZS50b1N0cmluZygpO1xuICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24udG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IGNoYW5nZVByaW9yaXR5ID0gKG5ld1ByaW9yaXR5KSA9PiB7XG4gICAgICAgIHByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG4gICAgfVxuXG4gICAgY29uc3QgZWRpdFRhc2sgPSAobmV3VGl0bGUsIG5ld0Rlc2NyaXB0aW9uLCBuZXdEdWVEYXRlLCBuZXdQcmlvcml0eSkgPT4ge1xuICAgICAgICB0aXRsZSA9IG5ld1RpdGxlO1xuICAgICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgICAgICBkdWVEYXRlID0gbmV3RHVlRGF0ZTtcbiAgICAgICAgY2hhbmdlUHJpb3JpdHkobmV3UHJpb3JpdHkpO1xuICAgIH1cblxuICAgIGNvbnN0IHByaW50VGFzayA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFRhc2sgdGl0bGUgLSAke3RpdGxlfSwgRGVzYyAtICR7ZGVzY3JpcHRpb259LCBEYXRlIC0gJHtkdWVEYXRlfSwgUHJpb3JpdHkgLSAke3ByaW9yaXR5fWApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldCB0aXRsZSgpIHtyZXR1cm4gdGl0bGV9LCBcbiAgICAgICAgZ2V0IGRlc2NyaXB0aW9uKCkge3JldHVybiBkZXNjcmlwdGlvbn0sIFxuICAgICAgICBnZXQgZHVlRGF0ZSgpIHtyZXR1cm4gZHVlRGF0ZX0sIFxuICAgICAgICBnZXQgcHJpb3JpdHkoKSB7cmV0dXJuIHByaW9yaXR5fSxcbiAgICAgICAgZ2V0Q29tcGxldGVTdGF0ZSxcbiAgICAgICAgc2V0Q29tcGxldGUsIFxuICAgICAgICBjaGFuZ2VQcmlvcml0eSxcbiAgICAgICAgZWRpdFRhc2ssXG4gICAgICAgIHByaW50VGFza1xuICAgIH07XG59O1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBGb2xkZXIodGl0bGUpIHtcbiAgICBcblxuICAgIGxldCBteXV1aWQgPSB1dWlkdjQoKTtcbiAgICBsZXQgdGFza3MgPSBbXTtcblxuICAgIGNvbnN0IGFkZFRhc2sgPSAobmV3VGFza05hbWUpID0+IHtcbiAgICAgICAgdGFza3MucHVzaChuZXdUYXNrTmFtZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGlzcGxheVRhc2tzID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFzayAke2l9IC0gJHt0YXNrc1tpXS50aXRsZX0sICR7dGFza3NbaV0uZHVlRGF0ZX0sICR7dGFza3NbaV0ucHJpb3JpdHl9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVUYXNrID0gKHRhc2tOYW1lKSA9PiB7XG4gICAgICAgIHRhc2tzLnNwbGljZSh0YXNrTmFtZSwgMSk7XG4gICAgfVxuXG4gICAgXG4gICAgcmV0dXJuIHt0aXRsZSwgdGFza3MsIG15dXVpZCwgYWRkVGFzaywgZGlzcGxheVRhc2tzLCBkZWxldGVUYXNrfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFN1cGVyRm9sZGVyKCkge1xuICAgIGxldCBmb2xkZXJzID0gW11cblxuICAgIGNvbnN0IGFkZEZvbGRlciA9IChuZXdGb2xkZXJOYW1lKSA9PiB7XG4gICAgICAgIGZvbGRlcnMucHVzaChuZXdGb2xkZXJOYW1lKTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVGb2xkZXIgPSAoZm9sZGVyTmFtZSkgPT4ge1xuICAgICAgICBmb2xkZXJzLnNwbGljZShmb2xkZXJOYW1lLCAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge2ZvbGRlcnMsIGFkZEZvbGRlciwgZGVsZXRlRm9sZGVyfVxufSIsImltcG9ydCB7XG4gICAgZGlzcGxheUN1cnJlbnRGb2xkZXJXaXRoSWRcbn0gZnJvbSAnLi4vaW5kZXguanMnO1xuXG4vLyBDcmVhdGUgYWxsIGVsZW1lbnRzIGZvciBlYWNoIHRhc2sgcHJvcGVydHkgYW5kIGNoYW5nZSB0ZXh0IGNvbnRlbnQgdG8gY29ycmVzcG9uZGluZyB2YWx1ZVxuLy8gVGhlbiBhZGQgdGhlbSB0byBhIG1haW4gZGl2IGFuZCByZXR1cm5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2tFbGVtZW50KHRhc2tOYW1lKSB7XG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHRhc2tUaXRsZUluRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbkluRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbnN0IHRhc2tEdWVEYXRlSW5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3QgdGFza1ByaW9yaXR5SW5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgXG4gICAgdGFza0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrLWRpdicpO1xuICAgIHRhc2tUaXRsZUluRGl2LnRleHRDb250ZW50ID0gdGFza05hbWUudGl0bGU7XG4gICAgdGFza0Rlc2NyaXB0aW9uSW5EaXYudGV4dENvbnRlbnQgPSB0YXNrTmFtZS5kZXNjcmlwdGlvbjtcbiAgICB0YXNrRHVlRGF0ZUluRGl2LnRleHRDb250ZW50ID0gdGFza05hbWUuZHVlRGF0ZTtcbiAgICB0YXNrUHJpb3JpdHlJbkRpdi50ZXh0Q29udGVudCA9IHRhc2tOYW1lLnByaW9yaXR5O1xuICAgIFxuICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1RpdGxlSW5EaXYpO1xuICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0Rlc2NyaXB0aW9uSW5EaXYpO1xuICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0R1ZURhdGVJbkRpdik7XG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHlJbkRpdik7XG4gICAgXG4gICAgcmV0dXJuIHRhc2tEaXY7XG59XG5cbi8vIFRha2UgaW4gdGFzayBhbmQgd2hlcmUgdG8gYXBwZW5kXG4vLyBDcmVhdGUgdGhlIHRhc2sgdXNpbmcgY3JlYXRlVGFza0VsZW1lbnQgYW5kIGFzc2lnbiB0byB2YXJpYWJsZVxuLy8gVGFyZ2V0IGVsZW1lbnQgdG8gYXBwZW5kIHRvIGFuZCBhcHBlbmRcbmZ1bmN0aW9uIGFwcGVuZFRhc2sodGFza05hbWUsIGxvY2F0aW9uKSB7XG4gICAgbGV0IHRhc2tET00gPSBjcmVhdGVUYXNrRWxlbWVudCh0YXNrTmFtZSk7XG5cbiAgICBjb25zdCBsb2NhdGlvbkRPTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxvY2F0aW9uKTtcbiAgICBsb2NhdGlvbkRPTS5hcHBlbmRDaGlsZCh0YXNrRE9NKTtcbn1cblxuLy8gVGFrZSBpbiBmb2xkZXIgbmFtZSB0aGVuIGxvb3AgdGhyb3VnaCB0YXNrcyBpbnNpZGUgZm9sZGVyIHRvIGFwcGVuZCB0byBzY3JlZW5cbmZ1bmN0aW9uIGRpc3BsYXlGb2xkZXJUYXNrcyhmb2xkZXJOYW1lKSB7XG4gICAgZm9sZGVyTmFtZS50YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICBhcHBlbmRUYXNrKHRhc2ssIFsndGFzay1jb250YWluZXInXSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFRhc2tGb3JtSW5mbygpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4tZm9ybScpO1xuXG4gICAgY29uc3QgdGFza1RpdGxlSW5Gb3JtID0gZm9ybS5lbGVtZW50c1sndGFzay10aXRsZSddO1xuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbkluRm9ybSA9IGZvcm0uZWxlbWVudHNbJ3Rhc2stZGVzY3JpcHRpb24nXTtcbiAgICBjb25zdCB0YXNrRHVlRGF0ZUluRm9ybSA9IGZvcm0uZWxlbWVudHNbJ3Rhc2stZHVlLWRhdGUnXTtcbiAgICBjb25zdCB0YXNrUHJpb3JpdHlJbkZvcm0gPSBmb3JtLmVsZW1lbnRzWyd0YXNrLXByaW9yaXR5J107XG4gICAgXG4gICAgbGV0IHRhc2tUaXRsZSA9IHRhc2tUaXRsZUluRm9ybS52YWx1ZTtcbiAgICBsZXQgdGFza0Rlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uSW5Gb3JtLnZhbHVlO1xuICAgIGxldCB0YXNrRHVlRGF0ZSA9IHRhc2tEdWVEYXRlSW5Gb3JtLnZhbHVlO1xuICAgIGxldCB0YXNrUHJpb3JpdHkgPSB0YXNrUHJpb3JpdHlJbkZvcm0udmFsdWU7XG5cbiAgICByZXR1cm4ge3Rhc2tUaXRsZSwgdGFza0Rlc2NyaXB0aW9uLCB0YXNrRHVlRGF0ZSwgdGFza1ByaW9yaXR5fTtcbn0gXG5cbi8vIENyZWF0ZSBidXR0b24gdG8gaG9sZCBmb2xkZXIgYW5kIHRpdGxlXG4vLyBBZGQgdGl0bGUgdG8gZGl2IGFuZCByZXR1cm5cbmZ1bmN0aW9uIGNyZWF0ZUZvbGRlckVsZW1lbnQoZm9sZGVyTmFtZSkge1xuICAgIC8vIGNvbnN0IGZvbGRlckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb2xkZXJzLWRpdicpO1xuICAgIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcicpO1xuICAgIGNvbnN0IGZvbGRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGZvbGRlckJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIC8vIGNvbnN0IGZvbGRlckRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXG4gICAgZm9sZGVyRGl2LmNsYXNzTGlzdC5hZGQoJ2ZvbGRlci1kaXYnKTtcbiAgICBmb2xkZXJCdG4uY2xhc3NMaXN0LmFkZCgnZm9sZGVyLWJ1dHRvbicpO1xuICAgIGZvbGRlckJ0bi50ZXh0Q29udGVudCA9IGZvbGRlck5hbWUudGl0bGU7XG4gICAgZm9sZGVyQnRuLnZhbHVlID0gZm9sZGVyTmFtZS5teXV1aWQ7XG5cbiAgICBmb2xkZXJEaXYuYXBwZW5kQ2hpbGQoZm9sZGVyQnRuKTtcblxuICAgIHNpZGViYXIuYXBwZW5kQ2hpbGQoZm9sZGVyRGl2KTtcblxuICAgIGZvbGRlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBkaXNwbGF5Q3VycmVudEZvbGRlcldpdGhJZChmb2xkZXJOYW1lLm15dXVpZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGZvbGRlck5hbWUudGl0bGUsIGZvbGRlck5hbWUubXl1dWlkKTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gZm9sZGVyRGl2O1xufVxuXG4vLyBUYWtlIGluIGZvbGRlciBuYW1lIGFuZCBjcmVhdGUgZm9sZGVyIHVzaW5nIGZ1bmN0aW9uXG4vLyBBcHBlbmQgdG8gc2lkZWJhclxuZnVuY3Rpb24gYXBwZW5kRm9sZGVyKGZvbGRlck5hbWUpIHtcbiAgICBsZXQgZm9sZGVyRE9NID0gY3JlYXRlRm9sZGVyRWxlbWVudChmb2xkZXJOYW1lKTtcbiAgICBcbiAgICBjb25zdCBzaWRlYmFyRm9sZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyJyk7XG4gICAgc2lkZWJhckZvbGRlcnMuYXBwZW5kQ2hpbGQoZm9sZGVyRE9NKTtcbn1cblxuLy8gVGFrZSBpbiBzdXBlciBmb2xkZXIgbmFtZSB0byBsb29wIHRocm91Z2ggZWFjaCBmb2xkZXIgYW5kIGFwcGVuZCB0byBzaWRlYmFyXG5mdW5jdGlvbiBkaXNwbGF5Rm9sZGVycyhzdXBlckZvbGRlck5hbWUpIHtcbiAgICAvLyBjbGVhclNpZGViYXIoKTtcbiAgICBzdXBlckZvbGRlck5hbWUuZm9sZGVycy5mb3JFYWNoKGZvbGRlciA9PiB7XG4gICAgICAgIGFwcGVuZEZvbGRlcihmb2xkZXIpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRGb2xkZXJGb3JtSW5mbygpIHtcbiAgICBjb25zdCBmb2xkZXJGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbGRlci1mb3JtJyk7XG5cbiAgICBjb25zdCBmb2xkZXJUaXRsZUluRm9ybSA9IGZvbGRlckZvcm0uZWxlbWVudHNbJ2ZvbGRlci10aXRsZSddLnZhbHVlO1xuXG4gICAgcmV0dXJuIHtmb2xkZXJGb3JtLCBmb2xkZXJUaXRsZUluRm9ybX07XG59XG5cbmZ1bmN0aW9uIGNsZWFyVGFza0NvbnRhaW5lcigpIHtcbiAgICBjb25zdCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2stY29udGFpbmVyJyk7XG5cbiAgICB0YXNrQ29udGFpbmVyLnRleHRDb250ZW50ID0gJyc7XG59XG5cbmZ1bmN0aW9uIGFwcGVuZERyb3Bkb3duKCkge1xuICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgIGNvbnN0IGZpZWxkc2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5LW9wdGlvbnMnKTtcbiAgICBcbiAgICBzZWxlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdmb2xkZXItc2VsZWN0aW9uJyk7XG5cbiAgICBmaWVsZHNldC5hZnRlcihzZWxlY3QpO1xufVxuXG5mdW5jdGlvbiBjbGVhclNpZGViYXIoKSB7XG4gICAgY29uc3QgZm9sZGVyc0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb2xkZXJzLWRpdicpO1xuICAgIGZvbGRlcnNEaXYudGV4dENvbnRlbnQgPSAnJztcbn1cblxuXG5leHBvcnQge1xuICAgIGdldFRhc2tGb3JtSW5mbyxcbiAgICBnZXRGb2xkZXJGb3JtSW5mbyxcbiAgICBjcmVhdGVUYXNrRWxlbWVudCxcbiAgICBjcmVhdGVGb2xkZXJFbGVtZW50LFxuICAgIGFwcGVuZEZvbGRlcixcbiAgICBkaXNwbGF5Rm9sZGVyVGFza3MsXG4gICAgYXBwZW5kVGFzayxcbiAgICBkaXNwbGF5Rm9sZGVycyxcbiAgICBjbGVhclRhc2tDb250YWluZXIsXG4gICAgYXBwZW5kRHJvcGRvd25cbn0iLCJpbXBvcnQge1xuICAgIFRhc2ssXG4gICAgRm9sZGVyLFxuICAgIFN1cGVyRm9sZGVyXG59IGZyb20gJy4vbW9kdWxlcy9mYWN0b3JpZXMuanMnO1xuXG5pbXBvcnQge1xuICAgIGdldFRhc2tGb3JtSW5mbyxcbiAgICBnZXRGb2xkZXJEaWFsb2csXG4gICAgZ2V0Rm9sZGVyRm9ybUluZm8sXG4gICAgY3JlYXRlVGFza0VsZW1lbnQsXG4gICAgY3JlYXRlRm9sZGVyRWxlbWVudCxcbiAgICBhcHBlbmRGb2xkZXIsXG4gICAgZGlzcGxheUZvbGRlclRhc2tzLFxuICAgIGFwcGVuZFRhc2ssXG4gICAgZGlzcGxheUZvbGRlcnMsXG4gICAgY2xlYXJUYXNrQ29udGFpbmVyLFxuICAgIGFwcGVuZERyb3Bkb3duXG59IGZyb20gJy4vbW9kdWxlcy9kb20uanMnO1xuXG4vL1N1cGVyIEZvbGRlciBcbmNvbnN0IHN1cGVyRm9sZGVyID0gU3VwZXJGb2xkZXIoKTtcblxuLy8gTWFpbiBGb2xkZXIgdGhhdCB0YXNrcyB3aWxsIGdvIGludG9cbmNvbnN0IGluYm94Rm9sZGVyID0gRm9sZGVyKCdJbmJveCcpO1xuY29uc29sZS5sb2coXCJJbmJveCBGb2xkZXIgSUQgaXMgXCIgKyBpbmJveEZvbGRlci5teXV1aWQpO1xuXG4vLyBUZXN0IHRhc2tzXG5jb25zdCB0YXNrMSA9IFRhc2soJ2Nob3JlcycsICd3YXNoIGRpc2hlcycsICdub3YgMjMnLCAnaGlnaCcpO1xuY29uc3QgdGFzazIgPSBUYXNrKCdtb3ZpZXMnLCAnYXZhdGFyJywgJ25vdiAyOScsICdtZWQnKTtcbmNvbnN0IHRhc2szID0gVGFzaygnY29kaW5nJywgJ3RvZG8gbGlzdCcsICdkZWMgMTAnLCAnbG93Jyk7XG5cbnRhc2sxLmVkaXRUYXNrKCduZXcgdGhpbmcnLCAnYW5vdGhlciBuZXcgdGhpbmcnLCAnbmV3IGRhdGUnLCAnSElHSCcpO1xuXG4vLyBUZXN0aW5nIGZ1bmN0aW9uYWxpdGllc1xuaW5ib3hGb2xkZXIuYWRkVGFzayh0YXNrMyk7XG5pbmJveEZvbGRlci5hZGRUYXNrKHRhc2syKTtcbmluYm94Rm9sZGVyLmFkZFRhc2sodGFzazEpO1xuaW5ib3hGb2xkZXIuZGlzcGxheVRhc2tzKCk7XG5zdXBlckZvbGRlci5hZGRGb2xkZXIoaW5ib3hGb2xkZXIpO1xuY29uc29sZS5sb2coc3VwZXJGb2xkZXIpO1xuXG5cbi8vIE9wZW4gdGFzayBtb2RhbCB3aGVuIGNsaWNrZWRcbmNvbnN0IG9wZW5UYXNrTW9kYWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3Blbi10YXNrLW1vZGFsLWJ0bicpO1xub3BlblRhc2tNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHRhc2tEaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1kaWFsb2cnKTtcblxuICAgIHRhc2tEaWFsb2cuc2hvd01vZGFsKCk7XG4gICAgYXBwZW5kRHJvcGRvd24oKTtcbn0pXG5cblxuLy8gZGlzcGxheUZvbGRlclRhc2tzKGluYm94Rm9sZGVyKTtcbi8vIGRpc3BsYXlGb2xkZXJzKHN1cGVyRm9sZGVyKTtcblxuLy8gT3BlbiBmb2xkZXIgbW9kYWwgd2hlbiBjbGlja2VkXG5jb25zdCBhZGRGb2xkZXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZGVyLWFkZC1idG4nKTtcbmFkZEZvbGRlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIFxuICAgIGNvbnN0IGZvbGRlckRpYWxvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2xkZXItZGlhbG9nJyk7XG4gICAgLy8gZ2V0Rm9sZGVyRGlhbG9nKCk7XG4gICAgLy91c2Ugc2hvd01vZGFsKClcbiAgICBmb2xkZXJEaWFsb2cuc2hvd01vZGFsKCk7XG59KTtcblxuLy8gRXZlbnQgbGlzdGVuZXIgdG8gc3VibWl0IGZvbGRlciBmb3JtXG4vLyBDcmVhdGUgYSBuZXcgZm9sZGVyIGluc3RhbmNlIHdpdGggaW5mbyBmcm9tIGZvcm1cbi8vIEFkZCB0byBET01cbi8vIEFkZCB0byBzdXBlciBmb2xkZXJcbi8vIFNob3VsZCBiZSBkb25lIG9uIHRoZSBmb3JtIGluc3RlYWQgb2YgYnV0dG9uIGJ1dCBNRE4gZXhhbXBsZSB3aXRoIGRpYWxvZyBkaWQgaXQgdGhpcyB3YXlcbmNvbnN0IGZvbGRlclN1Ym1pdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2xkZXItY29uZmlybS1idG4nKTtcbmZvbGRlclN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgXG4gICAgY29uc3QgZm9sZGVyRGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbGRlci1kaWFsb2cnKTtcbiAgICBjb25zdCB7Zm9sZGVyVGl0bGVJbkZvcm19ID0gZ2V0Rm9sZGVyRm9ybUluZm8oKTtcblxuICAgIGxldCBuZXdGb2xkZXIgPSBGb2xkZXIoZm9sZGVyVGl0bGVJbkZvcm0pO1xuICAgIGFwcGVuZEZvbGRlcihuZXdGb2xkZXIpO1xuICAgIFxuICAgIHN1cGVyRm9sZGVyLmFkZEZvbGRlcihuZXdGb2xkZXIpO1xuICAgIGNvbnNvbGUubG9nKHN1cGVyRm9sZGVyLmZvbGRlcnMpO1xuXG4gICAgZm9sZGVyRGlhbG9nLmNsb3NlKCk7XG59KTtcblxuLy8gR28gdGhyb3VnaCBhbGwgZm9sZGVycyBhbmQgY2hlY2sgaWYgdGhlIGNsaWNrZWQgYnV0dG9uIHZhbHVlIG1hdGNoZXMgZm9sZGVyIHZhbHVlXG4vLyB0aGVuIGRpc3BsYXkgdGFza3Mgb2YgdGhhdCBmb2xkZXIgdG8gc2NyZWVuXG5mdW5jdGlvbiBkaXNwbGF5Q3VycmVudEZvbGRlcldpdGhJZCh0ZW1wSWQpIHtcbiAgICAvLyBsZXQgdGVtcElkID0gdGhpcy52YWx1ZTtcbiAgICBzdXBlckZvbGRlci5mb2xkZXJzLmZvckVhY2goZm9sZGVyID0+IHtcbiAgICAgICAgaWYgKHRlbXBJZCA9PT0gZm9sZGVyLm15dXVpZCkge1xuICAgICAgICAgICAgY2xlYXJUYXNrQ29udGFpbmVyKCk7XG4gICAgICAgICAgICAvL2Rpc3BsYXkgYWxsIHRhc2tzIG9mIHRoaXMgZm9sZGVyIHRvIHBhZ2VcbiAgICAgICAgICAgIGRpc3BsYXlGb2xkZXJUYXNrcyhmb2xkZXIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJtYXRjaCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5jb25zdCB0YXNrQWRkQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2stYWRkLWJ0bicpO1xuLy8gQ3JlYXRlIG5ldyB0YXNrIGluc3RhbmNlIHVzaW5nIGluZm8gZnJvbSBmb3JtXG50YXNrQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgbGV0IGFub3RoZXJJRCA9IGRpc3BsYXlDdXJyZW50Rm9sZGVyV2l0aElkKGZvbGRlck5hbWUubXl1dWlkKTtcbiAgICBjb25zdCB7dGFza1RpdGxlLCB0YXNrRGVzY3JpcHRpb24sIHRhc2tEdWVEYXRlLCB0YXNrUHJpb3JpdHl9ID0gZ2V0VGFza0Zvcm1JbmZvKCk7XG5cbiAgICBjb25zdCBuZXdUYXNrID0gVGFzayh0YXNrVGl0bGUsIHRhc2tEZXNjcmlwdGlvbiwgdGFza0R1ZURhdGUsIHRhc2tQcmlvcml0eSk7XG4gICAgc3VwZXJGb2xkZXIuZm9sZGVycy5mb3JFYWNoKGZvbGRlciA9PiB7XG4gICAgICAgIGlmIChhbm90aGVySUQgPT09IGZvbGRlci5teXV1aWQpIHtcbiAgICAgICAgICAgIGZvbGRlci5hZGRUYXNrKG5ld1Rhc2spO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2cobmV3VGFzay5wcmludFRhc2soKSk7XG59KVxuXG5cbmxldCB0ZXN0Rm9sZGVyID0gRm9sZGVyKCd0ZXN0Jyk7XG50ZXN0Rm9sZGVyLmFkZFRhc2sodGFzazEpO1xuc3VwZXJGb2xkZXIuYWRkRm9sZGVyKHRlc3RGb2xkZXIpO1xuYXBwZW5kRm9sZGVyKHRlc3RGb2xkZXIpO1xuXG5sZXQgdGVzdEZvbGRlcjIgPSBGb2xkZXIoJ3Rlc3QyJyk7XG50ZXN0Rm9sZGVyMi5hZGRUYXNrKHRhc2syKTtcbnN1cGVyRm9sZGVyLmFkZEZvbGRlcih0ZXN0Rm9sZGVyMik7XG5hcHBlbmRGb2xkZXIodGVzdEZvbGRlcjIpO1xuXG5cbmV4cG9ydCB7XG4gICAgZGlzcGxheUN1cnJlbnRGb2xkZXJXaXRoSWRcbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyYW5kb21VVUlEIiwiY3J5cHRvIiwiYmluZCIsImdldFJhbmRvbVZhbHVlcyIsInJuZHM4IiwiVWludDhBcnJheSIsInJuZyIsIkVycm9yIiwiYnl0ZVRvSGV4IiwiaSIsInB1c2giLCJ0b1N0cmluZyIsInNsaWNlIiwib3B0aW9ucyIsImJ1ZiIsIm9mZnNldCIsInJuZHMiLCJyYW5kb20iLCJhcnIiLCJ1bnNhZmVTdHJpbmdpZnkiLCJUYXNrIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlU3RhdGUiLCJjaGFuZ2VQcmlvcml0eSIsIm5ld1ByaW9yaXR5IiwiZ2V0Q29tcGxldGVTdGF0ZSIsInNldENvbXBsZXRlIiwiZWRpdFRhc2siLCJuZXdUaXRsZSIsIm5ld0Rlc2NyaXB0aW9uIiwibmV3RHVlRGF0ZSIsInByaW50VGFzayIsImNvbnNvbGUiLCJsb2ciLCJGb2xkZXIiLCJteXV1aWQiLCJ0YXNrcyIsImFkZFRhc2siLCJuZXdUYXNrTmFtZSIsImRpc3BsYXlUYXNrcyIsImxlbmd0aCIsImRlbGV0ZVRhc2siLCJ0YXNrTmFtZSIsInNwbGljZSIsImFwcGVuZEZvbGRlciIsImZvbGRlck5hbWUiLCJmb2xkZXJET00iLCJzaWRlYmFyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZm9sZGVyRGl2IiwiY3JlYXRlRWxlbWVudCIsImZvbGRlckJ0biIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsdWUiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXNwbGF5Q3VycmVudEZvbGRlcldpdGhJZCIsImNyZWF0ZUZvbGRlckVsZW1lbnQiLCJzdXBlckZvbGRlciIsImZvbGRlcnMiLCJhZGRGb2xkZXIiLCJuZXdGb2xkZXJOYW1lIiwiZGVsZXRlRm9sZGVyIiwiU3VwZXJGb2xkZXIiLCJpbmJveEZvbGRlciIsInRhc2sxIiwidGFzazIiLCJ0YXNrMyIsInRlbXBJZCIsImZvckVhY2giLCJmb2xkZXIiLCJnZXRFbGVtZW50QnlJZCIsInRhc2siLCJsb2NhdGlvbiIsInRhc2tET00iLCJ0YXNrRGl2IiwidGFza1RpdGxlSW5EaXYiLCJ0YXNrRGVzY3JpcHRpb25JbkRpdiIsInRhc2tEdWVEYXRlSW5EaXYiLCJ0YXNrUHJpb3JpdHlJbkRpdiIsImNyZWF0ZVRhc2tFbGVtZW50IiwiYXBwZW5kVGFzayIsImRpc3BsYXlGb2xkZXJUYXNrcyIsInNob3dNb2RhbCIsInNlbGVjdCIsImZpZWxkc2V0Iiwic2V0QXR0cmlidXRlIiwiYWZ0ZXIiLCJhcHBlbmREcm9wZG93biIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZvbGRlckRpYWxvZyIsImZvbGRlclRpdGxlSW5Gb3JtIiwiZm9sZGVyRm9ybSIsImVsZW1lbnRzIiwiZ2V0Rm9sZGVyRm9ybUluZm8iLCJuZXdGb2xkZXIiLCJjbG9zZSIsImFub3RoZXJJRCIsInRhc2tUaXRsZSIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tEdWVEYXRlIiwidGFza1ByaW9yaXR5IiwiZm9ybSIsInRhc2tUaXRsZUluRm9ybSIsInRhc2tEZXNjcmlwdGlvbkluRm9ybSIsInRhc2tEdWVEYXRlSW5Gb3JtIiwidGFza1ByaW9yaXR5SW5Gb3JtIiwiZ2V0VGFza0Zvcm1JbmZvIiwibmV3VGFzayIsInRlc3RGb2xkZXIiLCJ0ZXN0Rm9sZGVyMiJdLCJzb3VyY2VSb290IjoiIn0=