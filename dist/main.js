(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{H:()=>y});const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let n;const o=new Uint8Array(16);function d(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));const l=function(e,n,o){if(t.randomUUID&&!n&&!e)return t.randomUUID();const l=(e=e||{}).random||(e.rng||d)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,n){o=o||0;for(let e=0;e<16;++e)n[o+e]=l[e];return n}return function(e,t=0){return r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]}(l)};function i(e,t,n,o){let d=!1;e=e.toString(),t=t.toString();const r=e=>{o=e};return{get title(){return e},get description(){return t},get dueDate(){return n},get priority(){return o},getCompleteState:()=>d,setComplete:()=>{d=!0},changePriority:r,editTask:(o,d,l,i)=>{e=o,t=d,n=l,r(i)},printTask:()=>{console.log(`Task title - ${e}, Desc - ${t}, Date - ${n}, Priority - ${o}`)}}}function a(e){let t=l(),n=[];return{title:e,tasks:n,myuuid:t,addTask:e=>{n.push(e)},displayTasks:()=>{for(let e=0;e<n.length;e++)console.log(`Task ${e} - ${n[e].title}, ${n[e].dueDate}, ${n[e].priority}`)},deleteTask:e=>{n.splice(e,1)}}}function s(e){let t=function(e){const t=document.querySelector(".sidebar"),n=document.createElement("div"),o=document.createElement("button");return n.classList.add("folder-div"),o.classList.add("folder-button"),o.textContent=e.title,o.value=e.myuuid,n.appendChild(o),t.appendChild(n),o.addEventListener("click",(function(){y(e.myuuid),console.log(e.title,e.myuuid)})),n}(e);document.querySelector(".sidebar").appendChild(t)}const c=function(){let e=[];return{folders:e,addFolder:t=>{e.push(t)},deleteFolder:t=>{e.splice(t,1)}}}(),u=a("Inbox");console.log("Inbox Folder ID is "+u.myuuid);const m=i("chores","wash dishes","nov 23","high"),p=i("movies","avatar","nov 29","med"),f=i("coding","todo list","dec 10","low");function y(e){c.folders.forEach((t=>{e===t.myuuid&&(document.getElementById("task-container").textContent="",function(e){e.tasks.forEach((e=>{!function(e,t){let n=function(e){const t=document.createElement("div"),n=document.createElement("p"),o=document.createElement("p"),d=document.createElement("p"),r=document.createElement("p");return t.classList.add("task-div"),n.textContent=e.title,o.textContent=e.description,d.textContent=e.dueDate,r.textContent=e.priority,t.appendChild(n),t.appendChild(o),t.appendChild(d),t.appendChild(r),t}(e);document.getElementById(t).appendChild(n)}(e,["task-container"])}))}(t),console.log("match found"))}))}m.editTask("new thing","another new thing","new date","HIGH"),u.addTask(f),u.addTask(p),u.addTask(m),u.displayTasks(),c.addFolder(u),console.log(c),document.getElementById("open-task-modal-btn").addEventListener("click",(function(){document.getElementById("task-dialog").showModal(),function(e){let t=0;const n=document.createElement("select"),o=document.getElementById("priority-options");n.setAttribute("id","folder-selection"),o.after(n),e.folders.forEach((e=>{const o=document.createElement("option");o.textContent=e.title,o.value=e.myuuid,o.setAttribute("index",t++),n.appendChild(o)}))}(c)})),document.getElementById("folder-add-btn").addEventListener("click",(function(){document.getElementById("folder-dialog").showModal()})),document.getElementById("folder-confirm-btn").addEventListener("click",(function(e){e.preventDefault();const t=document.getElementById("folder-dialog"),{folderTitleInForm:n}=function(){const e=document.getElementById("folder-form");return{folderForm:e,folderTitleInForm:e.elements["folder-title"].value}}();let o=a(n);s(o),c.addFolder(o),console.log(c.folders),t.close()})),document.getElementById("task-add-btn").addEventListener("click",(function(){let e=y(folderName.myuuid);const{taskTitle:t,taskDescription:n,taskDueDate:o,taskPriority:d}=function(){const e=document.getElementById("main-form"),t=e.elements["task-title"],n=e.elements["task-description"],o=e.elements["task-due-date"],d=e.elements["task-priority"];return{taskTitle:t.value,taskDescription:n.value,taskDueDate:o.value,taskPriority:d.value}}(),r=i(t,n,o,d);c.folders.forEach((t=>{e===t.myuuid&&t.addTask(r)})),console.log(r.printTask())}));let g=a("test");g.addTask(m),c.addFolder(g),s(g);let k=a("test2");k.addTask(p),c.addFolder(k),s(k)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0MsR0FDdEJyRSxRQUFRQyxJQUFJNEIsRUFBWUMsU0FFeEJrQyxFQUFhTSxPQUNqQixJQWdCbUJ0RCxTQUFTMEIsZUFBZSxnQkFFaENoQixpQkFBaUIsU0FBUyxXQUNqQyxJQUFJNkMsRUFBWTVDLEVBQTJCZCxXQUFXVixRQUN0RCxNQUFNLFVBQUNxRSxFQUFTLGdCQUFFQyxFQUFlLFlBQUVDLEVBQVcsYUFBRUMsR0Q1RHBELFdBQ0ksTUFBTUMsRUFBTzVELFNBQVMwQixlQUFlLGFBRS9CbUMsRUFBa0JELEVBQUtULFNBQVMsY0FDaENXLEVBQXdCRixFQUFLVCxTQUFTLG9CQUN0Q1ksRUFBb0JILEVBQUtULFNBQVMsaUJBQ2xDYSxFQUFxQkosRUFBS1QsU0FBUyxpQkFPekMsTUFBTyxDQUFDSyxVQUxRSyxFQUFnQnJELE1BS2JpRCxnQkFKR0ssRUFBc0J0RCxNQUlSa0QsWUFIbEJLLEVBQWtCdkQsTUFHYW1ELGFBRjlCSyxFQUFtQnhELE1BRzFDLENDOENvRXlELEdBRTFEQyxFQUFVakcsRUFBS3VGLEVBQVdDLEVBQWlCQyxFQUFhQyxHQUM5RDlDLEVBQVlDLFFBQVFVLFNBQVFDLElBQ3BCOEIsSUFBYzlCLEVBQU90QyxRQUNyQnNDLEVBQU9wQyxRQUFRNkUsRUFDbkIsSUFFSmxGLFFBQVFDLElBQUlpRixFQUFRbkYsWUFDeEIsSUFJQSxJQUFJb0YsRUFBYWpGLEVBQU8sUUFDeEJpRixFQUFXOUUsUUFBUStCLEdBQ25CUCxFQUFZRSxVQUFVb0QsR0FDdEJ2RSxFQUFhdUUsR0FFYixJQUFJQyxFQUFjbEYsRUFBTyxTQUN6QmtGLEVBQVkvRSxRQUFRZ0MsR0FDcEJSLEVBQVlFLFVBQVVxRCxHQUN0QnhFLEVBQWF3RSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9uYXRpdmUuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9mYWN0b3JpZXMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvZG9tLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJhbmRvbVVVSURcbn07IiwiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG5sZXQgZ2V0UmFuZG9tVmFsdWVzO1xuY29uc3Qgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi5cbiAgICBnZXRSYW5kb21WYWx1ZXMgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pO1xuXG4gICAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCJpbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG4vKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cblxuY29uc3QgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnNsaWNlKDEpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG4gIHJldHVybiBieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgcmV0dXJuIHV1aWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiLCJpbXBvcnQgbmF0aXZlIGZyb20gJy4vbmF0aXZlLmpzJztcbmltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBpZiAobmF0aXZlLnJhbmRvbVVVSUQgJiYgIWJ1ZiAmJiAhb3B0aW9ucykge1xuICAgIHJldHVybiBuYXRpdmUucmFuZG9tVVVJRCgpO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KHJuZHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2NDsiLCJpbXBvcnQge3Y0IGFzIHV1aWR2NH0gZnJvbSAndXVpZCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBUYXNrKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpIHtcblxuICAgIGxldCBjb21wbGV0ZVN0YXRlID0gZmFsc2U7XG5cbiAgICBjb25zdCBnZXRDb21wbGV0ZVN0YXRlID0gKCkgPT4gY29tcGxldGVTdGF0ZTtcblxuICAgIGNvbnN0IHNldENvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICBjb21wbGV0ZVN0YXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgdGl0bGUgPSB0aXRsZS50b1N0cmluZygpO1xuICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24udG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IGNoYW5nZVByaW9yaXR5ID0gKG5ld1ByaW9yaXR5KSA9PiB7XG4gICAgICAgIHByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG4gICAgfVxuXG4gICAgY29uc3QgZWRpdFRhc2sgPSAobmV3VGl0bGUsIG5ld0Rlc2NyaXB0aW9uLCBuZXdEdWVEYXRlLCBuZXdQcmlvcml0eSkgPT4ge1xuICAgICAgICB0aXRsZSA9IG5ld1RpdGxlO1xuICAgICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgICAgICBkdWVEYXRlID0gbmV3RHVlRGF0ZTtcbiAgICAgICAgY2hhbmdlUHJpb3JpdHkobmV3UHJpb3JpdHkpO1xuICAgIH1cblxuICAgIGNvbnN0IHByaW50VGFzayA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFRhc2sgdGl0bGUgLSAke3RpdGxlfSwgRGVzYyAtICR7ZGVzY3JpcHRpb259LCBEYXRlIC0gJHtkdWVEYXRlfSwgUHJpb3JpdHkgLSAke3ByaW9yaXR5fWApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldCB0aXRsZSgpIHtyZXR1cm4gdGl0bGV9LCBcbiAgICAgICAgZ2V0IGRlc2NyaXB0aW9uKCkge3JldHVybiBkZXNjcmlwdGlvbn0sIFxuICAgICAgICBnZXQgZHVlRGF0ZSgpIHtyZXR1cm4gZHVlRGF0ZX0sIFxuICAgICAgICBnZXQgcHJpb3JpdHkoKSB7cmV0dXJuIHByaW9yaXR5fSxcbiAgICAgICAgZ2V0Q29tcGxldGVTdGF0ZSxcbiAgICAgICAgc2V0Q29tcGxldGUsIFxuICAgICAgICBjaGFuZ2VQcmlvcml0eSxcbiAgICAgICAgZWRpdFRhc2ssXG4gICAgICAgIHByaW50VGFza1xuICAgIH07XG59O1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBGb2xkZXIodGl0bGUpIHtcbiAgICBcblxuICAgIGxldCBteXV1aWQgPSB1dWlkdjQoKTtcbiAgICBsZXQgdGFza3MgPSBbXTtcblxuICAgIGNvbnN0IGFkZFRhc2sgPSAobmV3VGFza05hbWUpID0+IHtcbiAgICAgICAgdGFza3MucHVzaChuZXdUYXNrTmFtZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGlzcGxheVRhc2tzID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFzayAke2l9IC0gJHt0YXNrc1tpXS50aXRsZX0sICR7dGFza3NbaV0uZHVlRGF0ZX0sICR7dGFza3NbaV0ucHJpb3JpdHl9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVUYXNrID0gKHRhc2tOYW1lKSA9PiB7XG4gICAgICAgIHRhc2tzLnNwbGljZSh0YXNrTmFtZSwgMSk7XG4gICAgfVxuXG4gICAgXG4gICAgcmV0dXJuIHt0aXRsZSwgdGFza3MsIG15dXVpZCwgYWRkVGFzaywgZGlzcGxheVRhc2tzLCBkZWxldGVUYXNrfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFN1cGVyRm9sZGVyKCkge1xuICAgIGxldCBmb2xkZXJzID0gW11cblxuICAgIGNvbnN0IGFkZEZvbGRlciA9IChuZXdGb2xkZXJOYW1lKSA9PiB7XG4gICAgICAgIGZvbGRlcnMucHVzaChuZXdGb2xkZXJOYW1lKTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVGb2xkZXIgPSAoZm9sZGVyTmFtZSkgPT4ge1xuICAgICAgICBmb2xkZXJzLnNwbGljZShmb2xkZXJOYW1lLCAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge2ZvbGRlcnMsIGFkZEZvbGRlciwgZGVsZXRlRm9sZGVyfVxufSIsImltcG9ydCB7XG4gICAgZGlzcGxheUN1cnJlbnRGb2xkZXJXaXRoSWRcbn0gZnJvbSAnLi4vaW5kZXguanMnO1xuaW1wb3J0IHsgU3VwZXJGb2xkZXIgfSBmcm9tICcuL2ZhY3Rvcmllcy5qcyc7XG5cbi8vIENyZWF0ZSBhbGwgZWxlbWVudHMgZm9yIGVhY2ggdGFzayBwcm9wZXJ0eSBhbmQgY2hhbmdlIHRleHQgY29udGVudCB0byBjb3JyZXNwb25kaW5nIHZhbHVlXG4vLyBUaGVuIGFkZCB0aGVtIHRvIGEgbWFpbiBkaXYgYW5kIHJldHVyblxuZnVuY3Rpb24gY3JlYXRlVGFza0VsZW1lbnQodGFza05hbWUpIHtcbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgdGFza1RpdGxlSW5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uSW5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3QgdGFza0R1ZURhdGVJbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb25zdCB0YXNrUHJpb3JpdHlJbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBcbiAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2stZGl2Jyk7XG4gICAgdGFza1RpdGxlSW5EaXYudGV4dENvbnRlbnQgPSB0YXNrTmFtZS50aXRsZTtcbiAgICB0YXNrRGVzY3JpcHRpb25JbkRpdi50ZXh0Q29udGVudCA9IHRhc2tOYW1lLmRlc2NyaXB0aW9uO1xuICAgIHRhc2tEdWVEYXRlSW5EaXYudGV4dENvbnRlbnQgPSB0YXNrTmFtZS5kdWVEYXRlO1xuICAgIHRhc2tQcmlvcml0eUluRGl2LnRleHRDb250ZW50ID0gdGFza05hbWUucHJpb3JpdHk7XG4gICAgXG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrVGl0bGVJbkRpdik7XG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrRGVzY3JpcHRpb25JbkRpdik7XG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrRHVlRGF0ZUluRGl2KTtcbiAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eUluRGl2KTtcbiAgICBcbiAgICByZXR1cm4gdGFza0Rpdjtcbn1cblxuLy8gVGFrZSBpbiB0YXNrIGFuZCB3aGVyZSB0byBhcHBlbmRcbi8vIENyZWF0ZSB0aGUgdGFzayB1c2luZyBjcmVhdGVUYXNrRWxlbWVudCBhbmQgYXNzaWduIHRvIHZhcmlhYmxlXG4vLyBUYXJnZXQgZWxlbWVudCB0byBhcHBlbmQgdG8gYW5kIGFwcGVuZFxuZnVuY3Rpb24gYXBwZW5kVGFzayh0YXNrTmFtZSwgbG9jYXRpb24pIHtcbiAgICBsZXQgdGFza0RPTSA9IGNyZWF0ZVRhc2tFbGVtZW50KHRhc2tOYW1lKTtcblxuICAgIGNvbnN0IGxvY2F0aW9uRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobG9jYXRpb24pO1xuICAgIGxvY2F0aW9uRE9NLmFwcGVuZENoaWxkKHRhc2tET00pO1xufVxuXG4vLyBUYWtlIGluIGZvbGRlciBuYW1lIHRoZW4gbG9vcCB0aHJvdWdoIHRhc2tzIGluc2lkZSBmb2xkZXIgdG8gYXBwZW5kIHRvIHNjcmVlblxuZnVuY3Rpb24gZGlzcGxheUZvbGRlclRhc2tzKGZvbGRlck5hbWUpIHtcbiAgICBmb2xkZXJOYW1lLnRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGFwcGVuZFRhc2sodGFzaywgWyd0YXNrLWNvbnRhaW5lciddKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0VGFza0Zvcm1JbmZvKCkge1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbi1mb3JtJyk7XG5cbiAgICBjb25zdCB0YXNrVGl0bGVJbkZvcm0gPSBmb3JtLmVsZW1lbnRzWyd0YXNrLXRpdGxlJ107XG4gICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uSW5Gb3JtID0gZm9ybS5lbGVtZW50c1sndGFzay1kZXNjcmlwdGlvbiddO1xuICAgIGNvbnN0IHRhc2tEdWVEYXRlSW5Gb3JtID0gZm9ybS5lbGVtZW50c1sndGFzay1kdWUtZGF0ZSddO1xuICAgIGNvbnN0IHRhc2tQcmlvcml0eUluRm9ybSA9IGZvcm0uZWxlbWVudHNbJ3Rhc2stcHJpb3JpdHknXTtcbiAgICBcbiAgICBsZXQgdGFza1RpdGxlID0gdGFza1RpdGxlSW5Gb3JtLnZhbHVlO1xuICAgIGxldCB0YXNrRGVzY3JpcHRpb24gPSB0YXNrRGVzY3JpcHRpb25JbkZvcm0udmFsdWU7XG4gICAgbGV0IHRhc2tEdWVEYXRlID0gdGFza0R1ZURhdGVJbkZvcm0udmFsdWU7XG4gICAgbGV0IHRhc2tQcmlvcml0eSA9IHRhc2tQcmlvcml0eUluRm9ybS52YWx1ZTtcblxuICAgIHJldHVybiB7dGFza1RpdGxlLCB0YXNrRGVzY3JpcHRpb24sIHRhc2tEdWVEYXRlLCB0YXNrUHJpb3JpdHl9O1xufSBcblxuLy8gQ3JlYXRlIGJ1dHRvbiB0byBob2xkIGZvbGRlciBhbmQgdGl0bGVcbi8vIEFkZCB0aXRsZSB0byBkaXYgYW5kIHJldHVyblxuZnVuY3Rpb24gY3JlYXRlRm9sZGVyRWxlbWVudChmb2xkZXJOYW1lKSB7XG4gICAgLy8gY29uc3QgZm9sZGVyRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvbGRlcnMtZGl2Jyk7XG4gICAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyJyk7XG4gICAgY29uc3QgZm9sZGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgZm9sZGVyQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgLy8gY29uc3QgZm9sZGVyRGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgICBmb2xkZXJEaXYuY2xhc3NMaXN0LmFkZCgnZm9sZGVyLWRpdicpO1xuICAgIGZvbGRlckJ0bi5jbGFzc0xpc3QuYWRkKCdmb2xkZXItYnV0dG9uJyk7XG4gICAgZm9sZGVyQnRuLnRleHRDb250ZW50ID0gZm9sZGVyTmFtZS50aXRsZTtcbiAgICBmb2xkZXJCdG4udmFsdWUgPSBmb2xkZXJOYW1lLm15dXVpZDtcblxuICAgIGZvbGRlckRpdi5hcHBlbmRDaGlsZChmb2xkZXJCdG4pO1xuXG4gICAgc2lkZWJhci5hcHBlbmRDaGlsZChmb2xkZXJEaXYpO1xuXG4gICAgZm9sZGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGRpc3BsYXlDdXJyZW50Rm9sZGVyV2l0aElkKGZvbGRlck5hbWUubXl1dWlkKTtcbiAgICAgICAgY29uc29sZS5sb2coZm9sZGVyTmFtZS50aXRsZSwgZm9sZGVyTmFtZS5teXV1aWQpO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBmb2xkZXJEaXY7XG59XG5cbi8vIFRha2UgaW4gZm9sZGVyIG5hbWUgYW5kIGNyZWF0ZSBmb2xkZXIgdXNpbmcgZnVuY3Rpb25cbi8vIEFwcGVuZCB0byBzaWRlYmFyXG5mdW5jdGlvbiBhcHBlbmRGb2xkZXIoZm9sZGVyTmFtZSkge1xuICAgIGxldCBmb2xkZXJET00gPSBjcmVhdGVGb2xkZXJFbGVtZW50KGZvbGRlck5hbWUpO1xuICAgIFxuICAgIGNvbnN0IHNpZGViYXJGb2xkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXInKTtcbiAgICBzaWRlYmFyRm9sZGVycy5hcHBlbmRDaGlsZChmb2xkZXJET00pO1xufVxuXG4vLyBUYWtlIGluIHN1cGVyIGZvbGRlciBuYW1lIHRvIGxvb3AgdGhyb3VnaCBlYWNoIGZvbGRlciBhbmQgYXBwZW5kIHRvIHNpZGViYXJcbmZ1bmN0aW9uIGRpc3BsYXlGb2xkZXJzKHN1cGVyRm9sZGVyTmFtZSkge1xuICAgIC8vIGNsZWFyU2lkZWJhcigpO1xuICAgIHN1cGVyRm9sZGVyTmFtZS5mb2xkZXJzLmZvckVhY2goZm9sZGVyID0+IHtcbiAgICAgICAgYXBwZW5kRm9sZGVyKGZvbGRlcik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEZvbGRlckZvcm1JbmZvKCkge1xuICAgIGNvbnN0IGZvbGRlckZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZGVyLWZvcm0nKTtcblxuICAgIGNvbnN0IGZvbGRlclRpdGxlSW5Gb3JtID0gZm9sZGVyRm9ybS5lbGVtZW50c1snZm9sZGVyLXRpdGxlJ10udmFsdWU7XG5cbiAgICByZXR1cm4ge2ZvbGRlckZvcm0sIGZvbGRlclRpdGxlSW5Gb3JtfTtcbn1cblxuZnVuY3Rpb24gY2xlYXJUYXNrQ29udGFpbmVyKCkge1xuICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1jb250YWluZXInKTtcblxuICAgIHRhc2tDb250YWluZXIudGV4dENvbnRlbnQgPSAnJztcbn1cblxuZnVuY3Rpb24gYXBwZW5kRHJvcGRvd24oc3VwZXJGb2xkZXIpIHtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgIGNvbnN0IGZpZWxkc2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5LW9wdGlvbnMnKTtcbiAgICBcbiAgICBzZWxlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdmb2xkZXItc2VsZWN0aW9uJyk7XG4gICAgZmllbGRzZXQuYWZ0ZXIoc2VsZWN0KTtcblxuICAgIHN1cGVyRm9sZGVyLmZvbGRlcnMuZm9yRWFjaChmb2xkZXIgPT4ge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBmb2xkZXIudGl0bGU7XG4gICAgICAgIG9wdGlvbi52YWx1ZSA9IGZvbGRlci5teXV1aWQ7IC8vIGZpZ3VyZSBvdXQgaWYgdGhpcyBpcyBnb29kIHdheSB0byBzZWxlY3RcbiAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBpbmRleCsrKTtcblxuICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBjbGVhclNpZGViYXIoKSB7XG4gICAgY29uc3QgZm9sZGVyc0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb2xkZXJzLWRpdicpO1xuICAgIGZvbGRlcnNEaXYudGV4dENvbnRlbnQgPSAnJztcbn1cblxuXG5leHBvcnQge1xuICAgIGdldFRhc2tGb3JtSW5mbyxcbiAgICBnZXRGb2xkZXJGb3JtSW5mbyxcbiAgICBjcmVhdGVUYXNrRWxlbWVudCxcbiAgICBjcmVhdGVGb2xkZXJFbGVtZW50LFxuICAgIGFwcGVuZEZvbGRlcixcbiAgICBkaXNwbGF5Rm9sZGVyVGFza3MsXG4gICAgYXBwZW5kVGFzayxcbiAgICBkaXNwbGF5Rm9sZGVycyxcbiAgICBjbGVhclRhc2tDb250YWluZXIsXG4gICAgYXBwZW5kRHJvcGRvd25cbn0iLCJpbXBvcnQge1xuICAgIFRhc2ssXG4gICAgRm9sZGVyLFxuICAgIFN1cGVyRm9sZGVyXG59IGZyb20gJy4vbW9kdWxlcy9mYWN0b3JpZXMuanMnO1xuXG5pbXBvcnQge1xuICAgIGdldFRhc2tGb3JtSW5mbyxcbiAgICBnZXRGb2xkZXJEaWFsb2csXG4gICAgZ2V0Rm9sZGVyRm9ybUluZm8sXG4gICAgY3JlYXRlVGFza0VsZW1lbnQsXG4gICAgY3JlYXRlRm9sZGVyRWxlbWVudCxcbiAgICBhcHBlbmRGb2xkZXIsXG4gICAgZGlzcGxheUZvbGRlclRhc2tzLFxuICAgIGFwcGVuZFRhc2ssXG4gICAgZGlzcGxheUZvbGRlcnMsXG4gICAgY2xlYXJUYXNrQ29udGFpbmVyLFxuICAgIGFwcGVuZERyb3Bkb3duXG59IGZyb20gJy4vbW9kdWxlcy9kb20uanMnO1xuXG4vL1N1cGVyIEZvbGRlciBcbmNvbnN0IHN1cGVyRm9sZGVyID0gU3VwZXJGb2xkZXIoKTtcblxuLy8gTWFpbiBGb2xkZXIgdGhhdCB0YXNrcyB3aWxsIGdvIGludG9cbmNvbnN0IGluYm94Rm9sZGVyID0gRm9sZGVyKCdJbmJveCcpO1xuY29uc29sZS5sb2coXCJJbmJveCBGb2xkZXIgSUQgaXMgXCIgKyBpbmJveEZvbGRlci5teXV1aWQpO1xuXG4vLyBUZXN0IHRhc2tzXG5jb25zdCB0YXNrMSA9IFRhc2soJ2Nob3JlcycsICd3YXNoIGRpc2hlcycsICdub3YgMjMnLCAnaGlnaCcpO1xuY29uc3QgdGFzazIgPSBUYXNrKCdtb3ZpZXMnLCAnYXZhdGFyJywgJ25vdiAyOScsICdtZWQnKTtcbmNvbnN0IHRhc2szID0gVGFzaygnY29kaW5nJywgJ3RvZG8gbGlzdCcsICdkZWMgMTAnLCAnbG93Jyk7XG5cbnRhc2sxLmVkaXRUYXNrKCduZXcgdGhpbmcnLCAnYW5vdGhlciBuZXcgdGhpbmcnLCAnbmV3IGRhdGUnLCAnSElHSCcpO1xuXG4vLyBUZXN0aW5nIGZ1bmN0aW9uYWxpdGllc1xuaW5ib3hGb2xkZXIuYWRkVGFzayh0YXNrMyk7XG5pbmJveEZvbGRlci5hZGRUYXNrKHRhc2syKTtcbmluYm94Rm9sZGVyLmFkZFRhc2sodGFzazEpO1xuaW5ib3hGb2xkZXIuZGlzcGxheVRhc2tzKCk7XG5zdXBlckZvbGRlci5hZGRGb2xkZXIoaW5ib3hGb2xkZXIpO1xuY29uc29sZS5sb2coc3VwZXJGb2xkZXIpO1xuXG5cbi8vIE9wZW4gdGFzayBtb2RhbCB3aGVuIGNsaWNrZWRcbmNvbnN0IG9wZW5UYXNrTW9kYWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3Blbi10YXNrLW1vZGFsLWJ0bicpO1xub3BlblRhc2tNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHRhc2tEaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1kaWFsb2cnKTtcblxuICAgIHRhc2tEaWFsb2cuc2hvd01vZGFsKCk7XG4gICAgYXBwZW5kRHJvcGRvd24oc3VwZXJGb2xkZXIpO1xufSlcblxuXG4vLyBkaXNwbGF5Rm9sZGVyVGFza3MoaW5ib3hGb2xkZXIpO1xuLy8gZGlzcGxheUZvbGRlcnMoc3VwZXJGb2xkZXIpO1xuXG4vLyBPcGVuIGZvbGRlciBtb2RhbCB3aGVuIGNsaWNrZWRcbmNvbnN0IGFkZEZvbGRlckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2xkZXItYWRkLWJ0bicpO1xuYWRkRm9sZGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgY29uc3QgZm9sZGVyRGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbGRlci1kaWFsb2cnKTtcbiAgICAvLyBnZXRGb2xkZXJEaWFsb2coKTtcbiAgICAvL3VzZSBzaG93TW9kYWwoKVxuICAgIGZvbGRlckRpYWxvZy5zaG93TW9kYWwoKTtcbn0pO1xuXG4vLyBFdmVudCBsaXN0ZW5lciB0byBzdWJtaXQgZm9sZGVyIGZvcm1cbi8vIENyZWF0ZSBhIG5ldyBmb2xkZXIgaW5zdGFuY2Ugd2l0aCBpbmZvIGZyb20gZm9ybVxuLy8gQWRkIHRvIERPTVxuLy8gQWRkIHRvIHN1cGVyIGZvbGRlclxuLy8gU2hvdWxkIGJlIGRvbmUgb24gdGhlIGZvcm0gaW5zdGVhZCBvZiBidXR0b24gYnV0IE1ETiBleGFtcGxlIHdpdGggZGlhbG9nIGRpZCBpdCB0aGlzIHdheVxuY29uc3QgZm9sZGVyU3VibWl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbGRlci1jb25maXJtLWJ0bicpO1xuZm9sZGVyU3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBcbiAgICBjb25zdCBmb2xkZXJEaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZGVyLWRpYWxvZycpO1xuICAgIGNvbnN0IHtmb2xkZXJUaXRsZUluRm9ybX0gPSBnZXRGb2xkZXJGb3JtSW5mbygpO1xuXG4gICAgbGV0IG5ld0ZvbGRlciA9IEZvbGRlcihmb2xkZXJUaXRsZUluRm9ybSk7XG4gICAgYXBwZW5kRm9sZGVyKG5ld0ZvbGRlcik7XG4gICAgXG4gICAgc3VwZXJGb2xkZXIuYWRkRm9sZGVyKG5ld0ZvbGRlcik7XG4gICAgY29uc29sZS5sb2coc3VwZXJGb2xkZXIuZm9sZGVycyk7XG5cbiAgICBmb2xkZXJEaWFsb2cuY2xvc2UoKTtcbn0pO1xuXG4vLyBHbyB0aHJvdWdoIGFsbCBmb2xkZXJzIGFuZCBjaGVjayBpZiB0aGUgY2xpY2tlZCBidXR0b24gdmFsdWUgbWF0Y2hlcyBmb2xkZXIgdmFsdWVcbi8vIHRoZW4gZGlzcGxheSB0YXNrcyBvZiB0aGF0IGZvbGRlciB0byBzY3JlZW5cbmZ1bmN0aW9uIGRpc3BsYXlDdXJyZW50Rm9sZGVyV2l0aElkKHRlbXBJZCkge1xuICAgIC8vIGxldCB0ZW1wSWQgPSB0aGlzLnZhbHVlO1xuICAgIHN1cGVyRm9sZGVyLmZvbGRlcnMuZm9yRWFjaChmb2xkZXIgPT4ge1xuICAgICAgICBpZiAodGVtcElkID09PSBmb2xkZXIubXl1dWlkKSB7XG4gICAgICAgICAgICBjbGVhclRhc2tDb250YWluZXIoKTtcbiAgICAgICAgICAgIC8vZGlzcGxheSBhbGwgdGFza3Mgb2YgdGhpcyBmb2xkZXIgdG8gcGFnZVxuICAgICAgICAgICAgZGlzcGxheUZvbGRlclRhc2tzKGZvbGRlcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm1hdGNoIGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmNvbnN0IHRhc2tBZGRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1hZGQtYnRuJyk7XG4vLyBDcmVhdGUgbmV3IHRhc2sgaW5zdGFuY2UgdXNpbmcgaW5mbyBmcm9tIGZvcm1cbnRhc2tBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBsZXQgYW5vdGhlcklEID0gZGlzcGxheUN1cnJlbnRGb2xkZXJXaXRoSWQoZm9sZGVyTmFtZS5teXV1aWQpO1xuICAgIGNvbnN0IHt0YXNrVGl0bGUsIHRhc2tEZXNjcmlwdGlvbiwgdGFza0R1ZURhdGUsIHRhc2tQcmlvcml0eX0gPSBnZXRUYXNrRm9ybUluZm8oKTtcblxuICAgIGNvbnN0IG5ld1Rhc2sgPSBUYXNrKHRhc2tUaXRsZSwgdGFza0Rlc2NyaXB0aW9uLCB0YXNrRHVlRGF0ZSwgdGFza1ByaW9yaXR5KTtcbiAgICBzdXBlckZvbGRlci5mb2xkZXJzLmZvckVhY2goZm9sZGVyID0+IHtcbiAgICAgICAgaWYgKGFub3RoZXJJRCA9PT0gZm9sZGVyLm15dXVpZCkge1xuICAgICAgICAgICAgZm9sZGVyLmFkZFRhc2sobmV3VGFzayk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhuZXdUYXNrLnByaW50VGFzaygpKTtcbn0pXG5cblxuXG5sZXQgdGVzdEZvbGRlciA9IEZvbGRlcigndGVzdCcpO1xudGVzdEZvbGRlci5hZGRUYXNrKHRhc2sxKTtcbnN1cGVyRm9sZGVyLmFkZEZvbGRlcih0ZXN0Rm9sZGVyKTtcbmFwcGVuZEZvbGRlcih0ZXN0Rm9sZGVyKTtcblxubGV0IHRlc3RGb2xkZXIyID0gRm9sZGVyKCd0ZXN0MicpO1xudGVzdEZvbGRlcjIuYWRkVGFzayh0YXNrMik7XG5zdXBlckZvbGRlci5hZGRGb2xkZXIodGVzdEZvbGRlcjIpO1xuYXBwZW5kRm9sZGVyKHRlc3RGb2xkZXIyKTtcblxuXG5leHBvcnQge1xuICAgIGRpc3BsYXlDdXJyZW50Rm9sZGVyV2l0aElkXG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicmFuZG9tVVVJRCIsImNyeXB0byIsImJpbmQiLCJnZXRSYW5kb21WYWx1ZXMiLCJybmRzOCIsIlVpbnQ4QXJyYXkiLCJybmciLCJFcnJvciIsImJ5dGVUb0hleCIsImkiLCJwdXNoIiwidG9TdHJpbmciLCJzbGljZSIsIm9wdGlvbnMiLCJidWYiLCJvZmZzZXQiLCJybmRzIiwicmFuZG9tIiwiYXJyIiwidW5zYWZlU3RyaW5naWZ5IiwiVGFzayIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZVN0YXRlIiwiY2hhbmdlUHJpb3JpdHkiLCJuZXdQcmlvcml0eSIsImdldENvbXBsZXRlU3RhdGUiLCJzZXRDb21wbGV0ZSIsImVkaXRUYXNrIiwibmV3VGl0bGUiLCJuZXdEZXNjcmlwdGlvbiIsIm5ld0R1ZURhdGUiLCJwcmludFRhc2siLCJjb25zb2xlIiwibG9nIiwiRm9sZGVyIiwibXl1dWlkIiwidGFza3MiLCJhZGRUYXNrIiwibmV3VGFza05hbWUiLCJkaXNwbGF5VGFza3MiLCJsZW5ndGgiLCJkZWxldGVUYXNrIiwidGFza05hbWUiLCJzcGxpY2UiLCJhcHBlbmRGb2xkZXIiLCJmb2xkZXJOYW1lIiwiZm9sZGVyRE9NIiwic2lkZWJhciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZvbGRlckRpdiIsImNyZWF0ZUVsZW1lbnQiLCJmb2xkZXJCdG4iLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbHVlIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzcGxheUN1cnJlbnRGb2xkZXJXaXRoSWQiLCJjcmVhdGVGb2xkZXJFbGVtZW50Iiwic3VwZXJGb2xkZXIiLCJmb2xkZXJzIiwiYWRkRm9sZGVyIiwibmV3Rm9sZGVyTmFtZSIsImRlbGV0ZUZvbGRlciIsIlN1cGVyRm9sZGVyIiwiaW5ib3hGb2xkZXIiLCJ0YXNrMSIsInRhc2syIiwidGFzazMiLCJ0ZW1wSWQiLCJmb3JFYWNoIiwiZm9sZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0YXNrIiwibG9jYXRpb24iLCJ0YXNrRE9NIiwidGFza0RpdiIsInRhc2tUaXRsZUluRGl2IiwidGFza0Rlc2NyaXB0aW9uSW5EaXYiLCJ0YXNrRHVlRGF0ZUluRGl2IiwidGFza1ByaW9yaXR5SW5EaXYiLCJjcmVhdGVUYXNrRWxlbWVudCIsImFwcGVuZFRhc2siLCJkaXNwbGF5Rm9sZGVyVGFza3MiLCJzaG93TW9kYWwiLCJpbmRleCIsInNlbGVjdCIsImZpZWxkc2V0Iiwic2V0QXR0cmlidXRlIiwiYWZ0ZXIiLCJvcHRpb24iLCJhcHBlbmREcm9wZG93biIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZvbGRlckRpYWxvZyIsImZvbGRlclRpdGxlSW5Gb3JtIiwiZm9sZGVyRm9ybSIsImVsZW1lbnRzIiwiZ2V0Rm9sZGVyRm9ybUluZm8iLCJuZXdGb2xkZXIiLCJjbG9zZSIsImFub3RoZXJJRCIsInRhc2tUaXRsZSIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tEdWVEYXRlIiwidGFza1ByaW9yaXR5IiwiZm9ybSIsInRhc2tUaXRsZUluRm9ybSIsInRhc2tEZXNjcmlwdGlvbkluRm9ybSIsInRhc2tEdWVEYXRlSW5Gb3JtIiwidGFza1ByaW9yaXR5SW5Gb3JtIiwiZ2V0VGFza0Zvcm1JbmZvIiwibmV3VGFzayIsInRlc3RGb2xkZXIiLCJ0ZXN0Rm9sZGVyMiJdLCJzb3VyY2VSb290IjoiIn0=